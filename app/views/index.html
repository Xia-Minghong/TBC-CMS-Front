<!-- Content Header (Page header) -->
<section class="content-header" >
  <h1>
    Crisis Management System
    <small>Dashboard (Emergency Manager)</small>
  </h1>
  <!--</ol>-->
</section>

<!-- Main content -->
<section class="content">

  <!-- Info boxes -->
  <div class="row" ng-include="'views/header_status.html'">

  </div><!-- /.row -->
  <!-- Main row -->
  <div class="row">
    <!-- Left col -->
    <section class="col-lg-7 connectedSortable-disabled">

      <!-- MAP & BOX PANE -->
      <div class="box box-success" ng-include="'views/map.html'">

      </div><!-- /.box -->


      <!-- TABLE: LATEST ORDERS -->
      <div class="box box-info" ng-include="'views/syslog.html'">

      </div><!-- /.box -->

    </section><!-- /.Left col -->
    <!-- right col (We are only adding the ID to make the widgets sortable)-->
    <section class="col-lg-5 connectedSortable-disabled">

      <!-- TO DO List -->
      <div class="box box-primary">
        <div class="box-header">
          <i class="ion ion-clipboard"></i>
          <h3 class="box-title">To Do List</h3>
          <!--<br><br>{{$root.incidents}}<br><br>Updates{{$root.allIncidentUpdates}}<br><br>Dispatches{{$root.allIncidentDispatches}}<br><br>TODO{{todoList}}-->
          <div class="box-tools pull-right">
            <ul class="pagination pagination-sm inline">
              <li><a ng-hide="currentPage == 0" ng-click="currentPage=currentPage-1">&laquo;</a></li>
              <li ng-repeat="n in [] | range:todoList.length/pageSize" ng-class="currentPage==n?'paginate_button active':''"><a ng-click="goPage(n)">{{n+1}}</a></li>
              <li><a ng-hide="currentPage >= todoList.length/pageSize - 1" ng-click="currentPage=currentPage+1">&raquo;</a></li>
            </ul>
          </div>
        </div><!-- /.box-header -->
        <div class="box-body">
          <ul class="todo-list">
            <li ng-repeat="todo in todoList | orderBy:'-time' | startFrom:currentPage*pageSize | limitTo:pageSize">
              <!-- drag handle -->
                      <span class="handle-disabled">
                        <i class="fa fa-ellipsis-v"></i>
                        <i class="fa fa-ellipsis-v"></i>
                      </span>
              <!-- todo text -->
              <span class="text" ng-click="open()" style="cursor: pointer">{{todo.todoType=='incident'?todo.name:(todo.todoType=='update'?("Update: "+todo.incident.name):('Dispatch: '+todo.agency))}}</span>
              <!-- Emphasis label -->
              <small class="label" ng-class="todo.todoType=='dispatch'?'label label-primary':(todo.todoType=='update'?'label label-info':(todo.todoType=='incident'?'label label-danger':'label label-warning'))"><i class="fa fa-clock-o"></i> <span am-time-ago="todo.time"></span></small>
            </li>

          </ul>
        </div><!-- /.box-body -->
      </div><!-- /.box -->


    </section><!-- right col -->
  </div><!-- /.row (main row) -->

</section><!-- /.content -->
